# ๐ง ะฃัััะฐะฝะตะฝะธะต ะฝะตะฟะพะปะฐะดะพะบ - ะกะตัะฒะธั ะฝะต ะพัะบััะฒะฐะตััั

> ะะพัะฐะณะพะฒะฐั ะดะธะฐะณะฝะพััะธะบะฐ ะฟัะพะฑะปะตะผ ั ะทะฐะฟััะบะพะผ ัะตัะฒะธัะฐ

---

## ๐จ ะัะพะฑะปะตะผะฐ: ะกะตัะฒะธั ะฝะต ะพัะบััะฒะฐะตััั

---

## โ ะจะฐะณ 1: ะัะพะฒะตัะบะฐ ะทะฐะฟััะตะฝะฝัั ะฟัะพัะตััะพะฒ

### ะัะพะฒะตัััะต, ะทะฐะฟััะตะฝ ะปะธ ัะตัะฒะตั:

```bash
# ะัะพะฒะตัะบะฐ ะฟะพััะฐ 3001 (production ัะตัะฒะตั)
lsof -i :3001

# ะัะพะฒะตัะบะฐ ะฟะพััะฐ 5173 (dev ัะตัะฒะตั)
lsof -i :5173

# ะัะพะฒะตัะบะฐ ะฟัะพัะตััะพะฒ Node.js
ps aux | grep node | grep -v grep
```

---

## โ ะจะฐะณ 2: ะะฐะฟััะบ ัะตัะฒะตัะฐ

### ะะฐัะธะฐะฝั A: Development ัะตะถะธะผ (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ัะฐะทัะฐะฑะพัะบะธ)

```bash
cd /Users/vl4endev/Desktop/VPN
npm run dev
```

ะะพัะปะต ะทะฐะฟััะบะฐ ะพัะบัะพะนัะต: `http://localhost:5173`

### ะะฐัะธะฐะฝั B: Production ัะตะถะธะผ

```bash
cd /Users/vl4endev/Desktop/VPN

# 1. ะกะพะฑะตัะธัะต frontend (ะตัะปะธ ะตัะต ะฝะต ัะพะฑัะฐะปะธ)
npm run build

# 2. ะฃะฑะตะดะธัะตัั, ััะพ backend ะทะฐะฒะธัะธะผะพััะธ ัััะฐะฝะพะฒะปะตะฝั
cd server && npm install && cd ..

# 3. ะะฐะฟัััะธัะต production ัะตัะฒะตั
npm start
```

ะะพัะปะต ะทะฐะฟััะบะฐ ะพัะบัะพะนัะต: `http://localhost:3001`

---

## โ ะจะฐะณ 3: ะัะพะฒะตัะบะฐ ะฟะพััะพะฒ

### ะัะปะธ ะฟะพัั ะทะฐะฝัั:

```bash
# ะััะฐะฝะพะฒะธัะต ะฟัะพัะตัั ะฝะฐ ะฟะพััั 3001
lsof -ti:3001 | xargs kill -9

# ะะปะธ ะฟะพัั 5173
lsof -ti:5173 | xargs kill -9
```

---

## โ ะจะฐะณ 4: ะัะพะฒะตัะบะฐ ะฟะตัะตะผะตะฝะฝัั ะพะบััะถะตะฝะธั

### ะฃะฑะตะดะธัะตัั, ััะพ ัะฐะนะป .env ัััะตััะฒัะตั:

```bash
cd /Users/vl4endev/Desktop/VPN
ls -la .env
```

### ะัะปะธ ัะฐะนะป .env ะพััััััะฒัะตั:

```bash
cp .env.example .env
# ะัะบัะพะนัะต .env ะธ ะทะฐะฟะพะปะฝะธัะต ะฒัะต ะฟะตัะตะผะตะฝะฝัะต
```

### ะะธะฝะธะผะฐะปัะฝัะต ะฟะตัะตะผะตะฝะฝัะต ะดะปั ะทะฐะฟััะบะฐ:

```env
# ะะปั development (npm run dev) - ะฝัะถะฝั ัะพะปัะบะพ Firebase:
VITE_FIREBASE_API_KEY=your_key
VITE_FIREBASE_AUTH_DOMAIN=your-project.firebaseapp.com
VITE_FIREBASE_PROJECT_ID=your-project-id
VITE_FIREBASE_STORAGE_BUCKET=your-project.appspot.com
VITE_FIREBASE_MESSAGING_SENDER_ID=123456789
VITE_FIREBASE_APP_ID=1:123456789:web:abc123

# ะะปั production (npm start) - ะฝัะถะฝั ัะฐะบะถะต backend ะฟะตัะตะผะตะฝะฝัะต:
NODE_ENV=production
PROXY_PORT=3001
XUI_HOST=http://your-3xui-server:2053
XUI_USERNAME=admin
XUI_PASSWORD=your_password
XUI_INBOUND_ID=1
ALLOWED_ORIGINS=http://localhost:3001
FRONTEND_URL=http://localhost:3001
```

---

## โ ะจะฐะณ 5: ะัะพะฒะตัะบะฐ ะปะพะณะพะฒ

### ะัะพะฒะตัััะต ะปะพะณะธ ัะตัะฒะตัะฐ:

```bash
# ะัะปะธ ัะตัะฒะตั ะทะฐะฟััะตะฝ ะฒ ัะพะฝะต
tail -f backend.log

# ะะปะธ ะฟัะพะฒะตัััะต ะฒัะฒะพะด ะฒ ัะตัะผะธะฝะฐะปะต ะณะดะต ะทะฐะฟััะตะฝ ัะตัะฒะตั
```

### ะขะธะฟะธัะฝัะต ะพัะธะฑะบะธ:

1. **ะัะธะฑะบะฐ: "Cannot find module"**
   ```bash
   # ะะตัะตะฝะธะต: ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
   npm install
   cd server && npm install && cd ..
   ```

2. **ะัะธะฑะบะฐ: "Port already in use"**
   ```bash
   # ะะตัะตะฝะธะต: ะัะฒะพะฑะพะดะธัะต ะฟะพัั
   lsof -ti:3001 | xargs kill -9
   ```

3. **ะัะธะฑะบะฐ: "dist folder not found"**
   ```bash
   # ะะตัะตะฝะธะต: ะกะพะฑะตัะธัะต frontend
   npm run build
   ```

---

## โ ะจะฐะณ 6: ะััััะฐั ะฟะตัะตะทะฐะณััะทะบะฐ

### ะะพะปะฝะฐั ะฟะตัะตะทะฐะณััะทะบะฐ ัะตัะฒะธัะฐ:

```bash
# 1. ะััะฐะฝะพะฒะธัะต ะฒัะต ะฟัะพัะตััั
pkill -f "node.*proxy-server"
pkill -f "vite"

# 2. ะัะธััะธัะต ะฟะพััั
lsof -ti:3001 | xargs kill -9 2>/dev/null
lsof -ti:5173 | xargs kill -9 2>/dev/null

# 3. ะะฐะฟัััะธัะต ะทะฐะฝะพะฒะพ (ะฒัะฑะตัะธัะต ะพะดะธะฝ ะฒะฐัะธะฐะฝั):

# Development:
npm run dev

# ะะปะธ Production:
npm run build:start
```

---

## ๐ฏ ะััััะพะต ัะตัะตะฝะธะต (ะพะดะธะฝ ัะบัะธะฟั)

### ะกะพะทะดะฐะนัะต ัะบัะธะฟั ะดะปั ะฐะฒัะพะผะฐัะธัะตัะบะพะน ะฟัะพะฒะตัะบะธ:

```bash
#!/bin/bash
cd /Users/vl4endev/Desktop/VPN

# ะััะฐะฝะพะฒะบะฐ ััะฐััั ะฟัะพัะตััะพะฒ
echo "๐ ะััะฐะฝะพะฒะบะฐ ััะฐััั ะฟัะพัะตััะพะฒ..."
pkill -f "node.*proxy-server" 2>/dev/null
pkill -f "vite" 2>/dev/null
lsof -ti:3001 | xargs kill -9 2>/dev/null
lsof -ti:5173 | xargs kill -9 2>/dev/null
sleep 2

# ะัะพะฒะตัะบะฐ ะทะฐะฒะธัะธะผะพััะตะน
echo "๐ฆ ะัะพะฒะตัะบะฐ ะทะฐะฒะธัะธะผะพััะตะน..."
if [ ! -d "node_modules" ]; then
    echo "ะฃััะฐะฝะพะฒะบะฐ ะทะฐะฒะธัะธะผะพััะตะน..."
    npm install
fi

if [ ! -d "server/node_modules" ]; then
    echo "ะฃััะฐะฝะพะฒะบะฐ backend ะทะฐะฒะธัะธะผะพััะตะน..."
    cd server && npm install && cd ..
fi

# ะัะพะฒะตัะบะฐ .env
if [ ! -f ".env" ]; then
    echo "โ๏ธ  ะคะฐะนะป .env ะฝะต ะฝะฐะนะดะตะฝ! ะกะพะทะดะฐะนัะต ะตะณะพ ะธะท .env.example"
    exit 1
fi

# ะะฐะฟััะบ (ะฒัะฑะตัะธัะต ัะตะถะธะผ)
echo "๐ ะะฐะฟััะบ ัะตัะฒะตัะฐ..."
echo "ะัะฑะตัะธัะต ัะตะถะธะผ:"
echo "1) Development (npm run dev) - ะฟะพัั 5173"
echo "2) Production (npm start) - ะฟะพัั 3001"

read -p "ะะฐั ะฒัะฑะพั (1 ะธะปะธ 2): " choice

if [ "$choice" = "1" ]; then
    npm run dev
elif [ "$choice" = "2" ]; then
    npm run build
    npm start
else
    echo "ะะตะฒะตัะฝัะน ะฒัะฑะพั"
    exit 1
fi
```

---

## ๐ ะะตัะฐะปัะฝะฐั ะดะธะฐะณะฝะพััะธะบะฐ

### 1. ะัะพะฒะตัะบะฐ ะดะพัััะฟะฐ ะบ ัะตัะฒะตัั:

```bash
# Health check ะดะปั production ัะตัะฒะตัะฐ
curl http://localhost:3001/health

# ะะถะธะดะฐะตะผัะน ะพัะฒะตั:
# {"status":"ok","service":"xui-proxy","timestamp":"...","uptime":...}
```

### 2. ะัะพะฒะตัะบะฐ ะฒ ะฑัะฐัะทะตัะต:

- **Development**: `http://localhost:5173`
- **Production**: `http://localhost:3001`

### 3. ะัะพะฒะตัะบะฐ ะบะพะฝัะพะปะธ ะฑัะฐัะทะตัะฐ:

ะัะบัะพะนัะต DevTools (F12) ะธ ะฟัะพะฒะตัััะต:
- ะัะธะฑะบะธ ะฒ Console
- ะะฐะฟัะพัั ะฒ Network
- ะัะธะฑะบะธ ะฟะพะดะบะปััะตะฝะธั ะบ Firebase

---

## ๐ ะงะฐัััะต ะฟัะพะฑะปะตะผั ะธ ัะตัะตะฝะธั

### ะัะพะฑะปะตะผะฐ: "Cannot GET /"

**ะัะธัะธะฝะฐ**: Frontend ะฝะต ัะพะฑัะฐะฝ ะธะปะธ ะฝะต ะฝะฐะนะดะตะฝ  
**ะะตัะตะฝะธะต**: 
```bash
npm run build
npm start
```

### ะัะพะฑะปะตะผะฐ: "Connection refused"

**ะัะธัะธะฝะฐ**: ะกะตัะฒะตั ะฝะต ะทะฐะฟััะตะฝ  
**ะะตัะตะฝะธะต**: ะะฐะฟัััะธัะต ัะตัะฒะตั (`npm run dev` ะธะปะธ `npm start`)

### ะัะพะฑะปะตะผะฐ: "Firebase: Error (auth/invalid-api-key)"

**ะัะธัะธะฝะฐ**: ะะตะฟัะฐะฒะธะปัะฝัะต Firebase credentials ะฒ .env  
**ะะตัะตะฝะธะต**: ะัะพะฒะตัััะต ะธ ะพะฑะฝะพะฒะธัะต ะฟะตัะตะผะตะฝะฝัะต VITE_FIREBASE_* ะฒ .env

### ะัะพะฑะปะตะผะฐ: ะกะตัะฒะตั ะทะฐะฟััะบะฐะตััั, ะฝะพ ะฝะต ะพัะฒะตัะฐะตั

**ะัะธัะธะฝะฐ**: ะกะตัะฒะตั ะทะฐะฒะธั ะธะปะธ ะฟะพัั ะทะฐะฝัั ะดััะณะธะผ ะฟัะพัะตััะพะผ  
**ะะตัะตะฝะธะต**: 
```bash
# ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั
pkill -f "node.*proxy-server"
npm start
```

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะฟะพะผะพัั

ะัะปะธ ะฟัะพะฑะปะตะผะฐ ะฝะต ัะตัะตะฝะฐ:

1. ะัะพะฒะตัััะต ะฟะพะปะฝัะต ะปะพะณะธ ัะตัะฒะตัะฐ
2. ะัะพะฒะตัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12)
3. ะฃะฑะตะดะธัะตัั, ััะพ ะฒัะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั ะทะฐะฟะพะปะฝะตะฝั
4. ะัะพะฒะตัััะต ะฒะตััะธั Node.js: `node --version` (ะดะพะปะถะฝะฐ ะฑััั >= 18)

---

**ะะพัะพะฒะพ!** ะกะปะตะดัะนัะต ะธะฝััััะบัะธัะผ ะฒััะต ะดะปั ัะตัะตะฝะธั ะฟัะพะฑะปะตะผั. ๐
