# ‚úÖ –§–∏–Ω–∞–ª—å–Ω–∞—è —Å–≤–æ–¥–∫–∞: Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞

> –í—Å–µ —Ñ–∞–π–ª—ã –¥–ª—è –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ Docker —Å–æ–∑–¥–∞–Ω—ã –∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

---

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. **Dockerfile** ‚úÖ
- Multi-stage build (3 —Å—Ç–∞–¥–∏–∏)
- Alpine Linux (–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –æ–±—Ä–∞–∑ ~200MB)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è production
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –Ω–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- Graceful shutdown —á–µ—Ä–µ–∑ dumb-init
- Healthcheck –≤—Å—Ç—Ä–æ–µ–Ω

### 2. **docker-compose.yml** ‚úÖ
- –ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞
- Healthcheck –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- Restart policy: unless-stopped
- –°–µ—Ç–µ–≤–∞—è –∏–∑–æ–ª—è—Ü–∏—è

### 3. **.dockerignore** ‚úÖ
- –ò—Å–∫–ª—é—á–∞–µ—Ç `.env` —Ñ–∞–π–ª—ã
- –ò—Å–∫–ª—é—á–∞–µ—Ç `node_modules`
- –ò—Å–∫–ª—é—á–∞–µ—Ç `.git`
- –ò—Å–∫–ª—é—á–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –±–µ–∫–∞–ø—ã
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏

### 4. **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏** ‚úÖ
- `DEPLOY_INSTRUCTIONS.md` ‚Äî –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `QUICK_DEPLOY.md` ‚Äî –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 –º–∏–Ω—É—Ç)
- `DOCKER_DEPLOY.md` ‚Äî –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ù–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
git clone https://github.com/vlad4endev/VPN.git skyputh-vpn
cd skyputh-vpn
cp .env.example .env.production
nano .env.production  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
docker-compose up -d --build
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü–æ—à–∞–≥–æ–≤–æ

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# 2. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/vlad4endev/VPN.git skyputh-vpn
cd skyputh-vpn

# 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env.production
nano .env.production

# 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
docker-compose up -d --build

# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ
docker-compose ps
curl http://localhost:3001/health
```

---

## üìä –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Dockerfile

### Multi-Stage Build:
- **Stage 1**: –°–±–æ—Ä–∫–∞ frontend (–≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
- **Stage 2**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (production only)
- **Stage 3**: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (—Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ)

### –†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞:
- **–ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–∑**: ~50MB (Alpine)
- **Frontend build**: ~5-10MB
- **Backend deps**: ~50MB
- **–ò—Ç–æ–≥–æ**: ~200MB (–≤–º–µ—Å—Ç–æ ~1GB –±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- ‚úÖ –ù–µ–ø—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (nodejs:1001)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ (–º–µ–Ω—å—à–µ attack surface)
- ‚úÖ –°–µ–∫—Ä–µ—Ç—ã —á–µ—Ä–µ–∑ environment variables
- ‚úÖ Graceful shutdown

---

## ‚úÖ –ß—Ç–æ –∏—Å–∫–ª—é—á–µ–Ω–æ –∏–∑ –æ–±—Ä–∞–∑–∞ (.dockerignore)

- ‚úÖ `.env` —Ñ–∞–π–ª—ã (—Å–µ–∫—Ä–µ—Ç—ã)
- ‚úÖ `node_modules` (–±—É–¥—É—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ –æ–±—Ä–∞–∑–µ)
- ‚úÖ `.git` (–∏—Å—Ç–æ—Ä–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è)
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (`*.md`, –∫—Ä–æ–º–µ `README.md`)
- ‚úÖ –ë–µ–∫–∞–ø—ã (`–ë–µ–∫–∞–ø*/`, `backup*/`)
- ‚úÖ –õ–æ–≥–∏ (`*.log`)
- ‚úÖ IDE —Ñ–∞–π–ª—ã (`.vscode/`, `.idea/`)

---

## üéØ –ì–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é!

–í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ —Å Docker –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

```bash
docker-compose up -d --build
```

---

**–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –°–º. `DEPLOY_INSTRUCTIONS.md`
