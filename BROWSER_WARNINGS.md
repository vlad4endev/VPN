# ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –æ –≤–Ω–µ—à–Ω–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö

> –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏ –æ parser-blocking —Å–∫—Ä–∏–ø—Ç–∞—Ö –æ—Ç yastatic.net

---

## üö® –ü—Ä–æ–±–ª–µ–º–∞

–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:

```
A parser-blocking, cross site (i.e. different eTLD+1) script, 
https://yastatic.net/jquery/2.2.3/jquery.min.js, is invoked via document.write.
The network request for this script MAY be blocked by the browser...
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –≠—Ç–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ù–ï –∏–∑ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞!

‚úÖ **–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ**: –í –ø—Ä–æ–µ–∫—Ç–µ –Ω–µ—Ç:
- –í—ã–∑–æ–≤–æ–≤ `document.write`
- –ó–∞–≥—Ä—É–∑–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å `yastatic.net`
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å –Ø–Ω–¥–µ–∫—Å —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞** (–Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ):
   - –Ø–Ω–¥–µ–∫—Å –ë—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
   - –î—Ä—É–≥–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤–Ω–µ–¥—Ä—è—é—Ç —Å–∫—Ä–∏–ø—Ç—ã

2. **–ü–ª–∞–≥–∏–Ω—ã –±—Ä–∞—É–∑–µ—Ä–∞**:
   - –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ –Ø–Ω–¥–µ–∫—Å
   - –ë–ª–æ–∫–∏—Ä–æ–≤—â–∏–∫–∏ —Ä–µ–∫–ª–∞–º—ã —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏

3. **–í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã**:
   - –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ø–Ω–¥–µ–∫—Å –ú–µ—Ç—Ä–∏–∫–∞ (–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ –µ—ë –Ω–µ—Ç)
   - –î—Ä—É–≥–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ—Ä–≤–∏—Å—ã

---

## üõ†Ô∏è –ö–∞–∫ —É—Å—Ç—Ä–∞–Ω–∏—Ç—å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
2. –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –ø–æ –æ–¥–Ω–æ–º—É, —á—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

–≠—Ç–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è **–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã** –∏ **–Ω–µ –≤–ª–∏—è—é—Ç** –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–û–Ω–∏ –ø—Ä–æ—Å—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç –æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ –±—É–¥—É—â–µ–º, –µ—Å–ª–∏:
- –ü–ª–æ—Ö–æ–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- –°—Ç—Ä–æ–≥–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Content Security Policy (CSP)

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —è–≤–Ω–æ –∑–∞–ø—Ä–µ—Ç–∏—Ç—å —Ç–∞–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ `server/proxy-server.js`:

```javascript
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      scriptSrc: ["'self'"],
      // –ó–∞–ø—Ä–µ—â–∞–µ–º document.write
      styleSrc: ["'self'", "'unsafe-inline'"],
      imgSrc: ["'self'", "data:", "https:"],
      connectSrc: [
        "'self'",
        process.env.XUI_HOST,
        process.env.FRONTEND_URL,
      ],
    },
  },
}))
```

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –°—Ç—Ä–æ–≥–∏–π CSP –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ª–µ–≥–∏—Ç–∏–º–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã.

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

### –í DevTools –±—Ä–∞—É–∑–µ—Ä–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Network** –≤–∫–ª–∞–¥–∫—É
2. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ `yastatic.net`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∫–ª–∞–¥–∫—É **Initiator** - —Ç–∞–º –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–æ, –æ—Ç–∫—É–¥–∞ –∏–¥—ë—Ç –∑–∞–ø—Ä–æ—Å

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/` (–¥–ª—è Chrome)
2. –û—Ç–∫–ª—é—á–∏—Ç–µ –≤—Å–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∏—Å—á–µ–∑–ª–∏ –ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

---

## üìä –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### ‚ùå –ù–ï –≤–ª–∏—è–µ—Ç –Ω–∞:
- –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ —ç—Ç–æ —Ç–æ–ª—å–∫–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)

### ‚ö†Ô∏è –ú–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞:
- –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–µ—Å–ª–∏ —Å–∫—Ä–∏–ø—Ç—ã –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è)
- –û–ø—ã—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—Ç)

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ú–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å** —ç—Ç–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫:

1. ‚úÖ –û–Ω–∏ –Ω–µ –∏–∑ –≤–∞—à–µ–≥–æ –∫–æ–¥–∞
2. ‚úÖ –ù–µ –≤–ª–∏—è—é—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
3. ‚úÖ –≠—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è, –∞ –Ω–µ –æ—à–∏–±–∫–∏
4. ‚úÖ –û–Ω–∏ —Å–≤—è–∑–∞–Ω—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ï—Å–ª–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –º–µ—à–∞—é—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ
2. –û—Ç–∫–ª—é—á–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Chrome Status - Parser-blocking scripts](https://www.chromestatus.com/feature/5718547946799104)
- [MDN - Content Security Policy](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP)

---

**–í—ã–≤–æ–¥**: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω—ã –¥–ª—è –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏—è. –û–Ω–∏ –Ω–µ —Å–≤—è–∑–∞–Ω—ã —Å –≤–∞—à–∏–º –∫–æ–¥–æ–º. üéâ
