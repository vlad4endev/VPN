# Перегенерация SubId для всех пользователей

## Внимание! ⚠️

Эта операция перегенерирует `subId` для **всех** пользователей в системе. Убедитесь, что вы понимаете последствия:

- Старые ссылки подписки перестанут работать
- Пользователям нужно будет получить новые ссылки
- Операция необратима

## Способ 1: Через консоль браузера (рекомендуется)

1. Откройте админ-панель в браузере
2. Откройте консоль разработчика (F12)
3. Выполните следующий код:

```javascript
// Импортируем adminService (только в dev режиме)
import('/src/features/admin/services/adminService.js').then(({ adminService }) => {
  // Подтверждаем выполнение
  if (confirm('Вы уверены, что хотите перегенерировать subId для всех пользователей?')) {
    adminService.regenerateAllSubIds()
      .then(result => {
        console.log('✅ Перегенерация завершена:', result)
        alert(`Успешно обновлено: ${result.updated} пользователей\nОшибок: ${result.errors}`)
      })
      .catch(error => {
        console.error('❌ Ошибка перегенерации:', error)
        alert('Ошибка: ' + error.message)
      })
  }
})
```

## Способ 2: Временная кнопка в админ-панели (для разработки)

Если вы хотите добавить кнопку в админ-панель, можно добавить временную кнопку в компонент AdminPanel.

## Результат

Функция возвращает объект с результатами:

```javascript
{
  total: 10,        // Всего пользователей
  updated: 10,      // Успешно обновлено
  errors: 0,        // Количество ошибок
  errorDetails: []  // Детали ошибок (если есть)
}
```

## Проверка

После выполнения проверьте:

1. Откройте Firebase Console
2. Перейдите в коллекцию `/artifacts/skyputh/public/data/users_v4`
3. Проверьте несколько пользователей - поле `subId` должно быть обновлено на новый формат (16 символов, буквенно-цифровая строка)

## Новый формат SubId

- **Длина**: 16 символов
- **Формат**: Буквенно-цифровая строка (base36: 0-9, a-z)
- **Пример**: `7vyrlrvx1aiwylh1`
