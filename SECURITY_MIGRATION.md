# Миграция безопасности: Удаление секретов из фронтенда

## Критически важно

**Все чувствительные секреты (пароли, ключи API) НЕ должны быть в фронтенде!**

Vite компилирует все `VITE_*` переменные в клиентский код, что означает, что они доступны любому пользователю через DevTools.

## Переменные, которые должны быть удалены из фронтенда

### ❌ Критичные секреты (удалить немедленно):
- `VITE_XUI_PASSWORD` - пароль от 3x-ui
- `VITE_XUI_USERNAME` - имя пользователя 3x-ui (если это секрет)
- `VITE_VLESS_PUBLIC_KEY` - публичный ключ VLESS
- `VITE_VLESS_SHORT_ID` - короткий ID VLESS

### ✅ Безопасные переменные (можно оставить):
- `VITE_FIREBASE_*` - Firebase клиентские ключи (предназначены для браузера)
- `VITE_RECAPTCHA_SITE_KEY` - публичный ключ reCAPTCHA
- `VITE_API_PROXY_URL` - URL backend API (публичный)

## Миграция

Все операции с 3x-ui должны выполняться через backend API:
- `/api/vpn/*` - все операции с VPN
- Backend использует секреты из `process.env` (не `VITE_*`)

## Текущий статус

- ✅ CORS настроен только для разрешенных доменов
- ✅ Webhook endpoints защищены (секретный заголовок + IP allowlist)
- ✅ Webhook endpoints без CORS
- ⏳ Удаление VITE_XUI_* из кода (в процессе)

## Следующие шаги

1. Удалить все использования `VITE_XUI_PASSWORD` из фронтенда
2. Убедиться, что все операции с 3x-ui идут через `/api/vpn/*`
3. Удалить `VITE_VLESS_*` переменные (если используются)
4. Обновить документацию
